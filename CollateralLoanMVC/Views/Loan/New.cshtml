<form asp-action="New" asp-controller="Loan" method="post">
	<div id="@nameof(Loan)" class="container-fluid px-0">
		<h4>Loan</h4>
		<div class="px-3 bg-light border">
			<div class="row py-3">
				<div class="col-4">
					<label for="@string.Concat(nameof(Loan), "_", nameof(Loan.Id))" class="">Loan Id</label>
					<input id="@string.Concat(nameof(Loan), "_", nameof(Loan.Id))" class="form-control" name="@string.Concat(nameof(Loan), "_", nameof(Loan.Id))" type="text" pattern="^[0-9.]+$" placeholder="loan id..." />
				</div>
				<div class="col-4">
					<label for="@string.Concat(nameof(Loan), "_", nameof(Loan.CustomerId))" class="">Customer Id</label>
					<input id="@string.Concat(nameof(Loan), "_", nameof(Loan.CustomerId))" class="form-control" name="@string.Concat(nameof(Loan), "_", nameof(Loan.CustomerId))" type="text" pattern="^[0-9.]+$" placeholder="customer id..." />
				</div>
				<div class="col-4">
					<label for="@string.Concat(nameof(Loan), "_", nameof(Loan.Type))" class="">Loan Type</label>
					<select id="@string.Concat(nameof(Loan), "_", nameof(Loan.Type))" class="custom-select" name="@string.Concat(nameof(Loan), "_", nameof(Loan.Type))">
						@foreach (string loanType in ViewBag.LoanTypes)
						{
							<option value="@loanType">@loanType</option>
						}
					</select>
				</div>
			</div>
			<div class="row py-3">
				<div class="col-4">
					<label for="@string.Concat(nameof(Loan), "_", nameof(Loan.Principal))" class="">Principal</label>
					<input id="@string.Concat(nameof(Loan), "_", nameof(Loan.Principal))" class="form-control" name="@string.Concat(nameof(Loan), "_", nameof(Loan.Principal))" type="text" pattern="^[0-9.]+$" placeholder="principal..." />
				</div>
				<div class="col-4">
					<label for="@string.Concat(nameof(Loan), "_", nameof(Loan.Interest))" class="">Interest</label>
					<input id="@string.Concat(nameof(Loan), "_", nameof(Loan.Interest))" class="form-control" name="@string.Concat(nameof(Loan), "_", nameof(Loan.Interest))" type="text" pattern="^[0-9.]+$" placeholder="interest..." />
				</div>
				<div class="col-4">
					<label for="@string.Concat(nameof(Loan), "_", nameof(Loan.Emi))" class="">Emi</label>
					<input id="@string.Concat(nameof(Loan), "_", nameof(Loan.Emi))" class="form-control" name="@string.Concat(nameof(Loan), "_", nameof(Loan.Emi))" type="text" pattern="^[0-9.]+$" placeholder="emi..." />
				</div>
			</div>
			<div class="row py-3">
				<div class="col-4">
					<label for="@string.Concat(nameof(Loan), "_", nameof(Loan.SanctionDate))" class="">Sanction Data</label>
					<input id="@string.Concat(nameof(Loan), "_", nameof(Loan.SanctionDate))" class="form-control" name="@string.Concat(nameof(Loan), "_", nameof(Loan.SanctionDate))" type="date" />
				</div>
				<div class="col-4">
					<label for="@string.Concat(nameof(Loan), "_", nameof(Loan.MaturityDate))" class="">Maturity Date</label>
					<input id="@string.Concat(nameof(Loan), "_", nameof(Loan.MaturityDate))" class="form-control" name="@string.Concat(nameof(Loan), "_", nameof(Loan.MaturityDate))" type="date" />
				</div>
			</div>
		</div>
	</div>
	<hr />
	<div id="@nameof(Loan)" class="container-fluid px-0">
		<h4>Collateral</h4>
		<div class="px-3">
			<div class="py-1">
				<h5>Basic</h5>
				<div class="px-3 border bg-light">
					<div class="row py-3">
						<div class="col-4">
							<label for="@string.Concat(nameof(Collateral), "_", nameof(Collateral.Id))">Collateral Id</label>
							<input id="@string.Concat(nameof(Collateral), "_", nameof(Collateral.Id))" class="form-control" name="@string.Concat(nameof(Collateral), "_", nameof(Collateral.Id))" type="text" pattern="^[0-9.]+$" placeholder="collateral id..." />
						</div>
						<div class="col-4">
							<label for="@string.Concat(nameof(Collateral), "_", nameof(Collateral.Type))">Type</label>
							<select id="@string.Concat(nameof(Collateral), "_", nameof(Collateral.Type))" class="custom-select" name="@string.Concat(nameof(Collateral), "_", nameof(Collateral.Type))" type="text">
								@foreach (string collateralType in ViewBag.CollateralTypes)
								{
									<option value="@collateralType">@collateralType</option>
								}
							</select>
						</div>
					</div>
					<div class="row py-3">
						<div class="col-4">
							<label for="@string.Concat(nameof(Collateral), "_", nameof(Collateral.InitialAssesDate))">Initial Assess Date</label>
							<input id="@string.Concat(nameof(Collateral), "_", nameof(Collateral.InitialAssesDate))" class="form-control" name="@string.Concat(nameof(Collateral), "_", nameof(Collateral.InitialAssesDate))" type="date" />
						</div>
						<div class="col-4">
							<label for="@string.Concat(nameof(Collateral), "_", nameof(Collateral.LastAssessDate))">Last Assess Date</label>
							<input id="@string.Concat(nameof(Collateral), "_", nameof(Collateral.LastAssessDate))" class="form-control" name="@string.Concat(nameof(Collateral), "_", nameof(Collateral.LastAssessDate))" type="date" />
						</div>
					</div>
				</div>
			</div>
			<div class="py-1">
				<h5>Additional</h5>
				<div id="@string.Concat(nameof(Collateral), "_", nameof(RealEstate))" class="px-3 bg-light border d-none">
					@await Html.PartialAsync("_RealEstateAdditionals")
				</div>
				<div id="@string.Concat(nameof(Collateral), "_", nameof(Land))" class="px-3 bg-light border d-none">
					@await Html.PartialAsync("_LandAdditionals")
				</div>
			</div>
		</div>
	</div>
	<input type="submit" value="test submit" class="btn btn-primary"/>
</form>

@section Scripts {
	<script>
		var currentlyVisibleCollateralId;
		var collateralTypeId = "#@string.Concat(nameof(Collateral), "_", nameof(Collateral.Type))";

		$(document).ready(function () {
			currentlyVisibleCollateralId = "#@string.Concat(nameof(Collateral), "_")" + $(collateralTypeId).val();
			$(currentlyVisibleCollateralId).removeClass("d-none");
			$(currentlyVisibleCollateralId).addClass("d-block");

			@*change additional collateral details*@
			$(collateralTypeId).change(function () {
				$(currentlyVisibleCollateralId).removeClass("d-block");
				$(currentlyVisibleCollateralId).addClass("d-none");

				currentlyVisibleCollateralId = "#@string.Concat(nameof(Collateral), "_")" + $(collateralTypeId).val();

				$(currentlyVisibleCollateralId).removeClass("d-none");
				$(currentlyVisibleCollateralId).addClass("d-block");
			});
		});
	</script>
}